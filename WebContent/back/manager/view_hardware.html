
<div id="news_search">
	<lable>硬件类型:</lable>
	<select id="search_tid" class="new_ipt" style="width: 100px">
		<option value="CPU" onmousedown="checkField(this.value)">CPU</option>
		<option value="motherboard" onmousedown="checkField(this.value)">主板</option>
		<option value="memory" onmousedown="checkField(this.value)">内存</option>
		<option value="disk" onmousedown="checkField(this.value)">硬盘</option>
		<option value="source" onmousedown="checkField(this.value)">电源</option>
		<option value="graphics" onmousedown="checkField(this.value)">显卡</option>
		<option value="box" onmousedown="checkField(this.value)">机箱</option>
	</select>
	
	<a href="" class="easyui-linkbutton" data-options="iconCls:'icon-search'">查询</a>
</div>
<input type="hidden" id="fatherid" value="" />
<div id="win">
	
</div>

<table id="show_data" data-options="fit:true"></table>

<script>
	$(function() {
		show_cpu_data("findCpuByPage", "cpuprice");
	})
	
	function assgVal() {
		
	}
	
	function openCpuWin(id,name) {
		$('#win').window({ 
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "cpu.html"
		    
		});
		$("#fatherid").val(id);
	}
	
	function openmotherboardWin(id,name) {
			$('#win').window({    
			    width:950,    
			    height:380,    
			    modal:true,
			    title:name,
			    href: "motherboard.html"
			});
			$("#fatherid").val(id);
		}
	
	function openmemoryWin(id,name) {
		
		$('#win').window({    
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "memory.html"
		    
		});
		$("#fatherid").val(id);
	}
	
	function opendiskWin(id,name) {
		
		$('#win').window({    
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "disk.html"
		});
		$("#fatherid").val(id);
	}
	
	function opensourceWin(id,name) {
		
		$('#win').window({    
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "source.html"
		});
		$("#fatherid").val(id);
	}
	
	function opengraphicsWin(id,name) {
		
		$('#win').window({    
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "graphics.html"
		});
		$("#fatherid").val(id);
	}
	
	function openboxWin(id,name) {
		
		$('#win').window({    
		    width:950,    
		    height:380,    
		    modal:true,
		    title:name,
		    href: "box.html"
		});
		$("#fatherid").val(id);
	}
	
	
	
	var type = "CPU";
	function checkField(val) {
		type = val;
		if (type == "CPU") {
			show_cpu_data("findCpuByPage", "cpuprice");
		} else if ("motherboard" == type) {
			show_motherboard_data("findMotherBoardByPage", "motherboardprice");
		} else if ("memory" == type) {
			show_memory_data("findMemoryByPage","memoryprice");
		} else if ("disk" == type) {
			show_disk_data("finddiskByPage","diskprice");
		} else if ("source" == type) {
			show_source_data("findSourceByPage", "sourceprice");
		} else if ("graphics" == type) {
			show_graphics_data("findGraphicsByPage","graphicsprice");
		} else if ("box" == type) {
			show_box_data("findBoxByPage","boxprice");
		}
	}
	
	function del(id) {
		if (type == "CPU") {
			$.post("../../hardwareinfo",{op:"delCpu", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'cpu删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_cpu_data("findCpuByPage", "cpuprice");
				}
			},"text");
		} else if ("motherboard" == type) {
			$.post("../../hardwareinfo",{op:"delMotherBoard", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'主板删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_motherboard_data("findMotherBoardByPage", "motherboardprice");
				}
			},"text");
		} else if ("memory" == type) {
			$.post("../../hardwareinfo",{op:"delMemory", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'内存删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_memory_data("findMemoryByPage","memoryprice");
				}
			},"text");
		} else if ("disk" == type) {
			$.post("../../hardwareinfo",{op:"delDisk", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'硬盘删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_disk_data("finddiskByPage","diskprice");
				}
			},"text");
		} else if ("source" == type) {
			$.post("../../hardwareinfo",{op:"delSource", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'电源删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_source_data("findSourceByPage", "sourceprice");
				}
			},"text");
		} else if ("graphics" == type) {
			$.post("../../hardwareinfo",{op:"delGraphics", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'显卡删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_graphics_data("findGraphicsByPage","graphicsprice");
				}
			},"text");
		} else if ("box" == type) {
			$.post("../../hardwareinfo",{op:"delBox", id:id}, function(data) {
				if (data <= 0) {
					alert("删除失败");
				} else if (data > 0) {
					$.messager.show({
						title:'温馨提示',
						msg:'机箱删除成功',
						timeout:2000,
						showType:'slide'
					});
					show_box_data("findBoxByPage","boxprice");
				}
			},"text");
			
		}
	}
	
	function show_cpu_data(op,  priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "cpuid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'cpuid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a onclick='openCpuWin("+row.cpuid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.cpuid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
	}
		
		function show_motherboard_data(op, priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "motherboardid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'motherboardid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='openmotherboardWin("+row.motherboardid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.motherboardid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
		}
		
		function show_memory_data(op, priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "memoryid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'memoryid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='openmemoryWin("+row.memoryid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.memoryid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
		}
		
		function show_disk_data(op,priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "diskid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'diskid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='opendiskWin("+row.diskid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.diskid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
		}
		
		function show_source_data(op,priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "sourceid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'sourceid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='opensourceWin("+row.sourceid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.sourceid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
		}
		
		function show_graphics_data(op,priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "graphicsid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:'graphicsid',title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='opengraphicsWin("+row.graphicsid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.graphicsid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
		}
		
		function show_box_data(op, priceName) {
		$('#show_data').datagrid({    
		    url:'../../hardwareinfo', 
		    queryParams: {op: op},
		    fitColumns: true,
		    loadMsg: "数据加载中...",
		    striped: true,
		    pagination: true,
		    pageSize: 5,
		    pageList: [5,10,15,20],
		    sortName: "boxid",
		    remoteSort: false,
		    sortOrder: "desc",
		    singleSelect: true,
		    columns:[[
		        {checkbox: true},
		        {field:"boxid",title:'编号',width:100,align:'center', sortable: true},    
		        {field:'name',title:'名称',width:100,align:'center'},    
		        {field:priceName,title:'价格',width:100,align:'center'},
		        {field:'quantiy',title:'库存',width:100,align:'center'},
		        {field:'usetimes',title:'使用次数',width:100,align:'center'},
		        {field:'score',title:'跑分',width:100,align:'center'},
		        {field:'_operate',title:'操作',width:100,align:'center', formatter: function(val, row, index) {
		        	var str = "<a href='javascript:void(0)' onclick='openboxWin("+row.boxid+",\""+row.name+"\")'>[详细]</a>&nbsp";
		        	str += "<a href='javascript:void(0)' onclick='del("+row.boxid+")'>[删除]</a>";
		        	return str;
		        }} 
		    ]],
		    toolbar: "#news_search"
		})
	}
	
</script>